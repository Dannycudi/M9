/*30. Escriviu un programa que contingui una funció
boolean data_valida (int dia, int mes, int any);
que rebi com a entrada una data (dia, mes i any) i torni cert o fals segons la data sigui vàlida o
no. Per a què una data sigui vàlida el valor del mes ha d'estar comprés entre 1 i 12 i el valor del
dia ha d'estar d'acord amb el mes.
*/
#include <stdio.h>
#include "../llibreries/boolean.h"
boolean es_bixest(int any);
int dies_mes(int mes, int any);
boolean data_valida (int dia, int mes, int any);
void main()
{
    int mes, any, dia;
    do
    {
        printf("Entra data dia-mes-any (0-0-0 per acabar) : ");
        scanf("%d-%d-%d", &dia, &mes, &any);
        if (dia!=0 && mes!=0 && any!=0)
        {
            if (data_valida(dia, mes, any)) printf("La data %d-%d-%d és vàlida\n\n", dia, mes, any);
            else printf("La data %d-%d-%d NO és vàlida\n\n", dia, mes, any);
        }
    }
    while (dia!=0 && mes!=0 && any!=0);
}

boolean es_bixest(int any)
{
    if (any%400==0 || any%4==0 && any%100!=0) return TRUE;
    return FALSE;
}

int dies_mes(int mes, int any)
{
    int dies=0;
    if (mes>0 && mes<13)
        switch(mes)
        {
            case 2:if (es_bixest(any)) dies=29;
                    else dies=28;
                    break;
            case 11:
            case 4:
            case 6:
            case 9: dies=30;
                    break;
            default : dies=31;
        }
    return dies;
}

boolean data_valida (int dia, int mes, int any)
{
    int dies;
    dies=dies_mes(mes, any);
    if (!dies || dia<1 || dia>dies) return FALSE;
    return TRUE;
}
